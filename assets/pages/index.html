<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Greg le Consanguin ‚Äî Web Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f172a" />

  <link rel="icon" type="image/png" href="/static/icon.png" />
  <link rel="stylesheet" href="/static/player.css" />
</head>

<body>
<div class="app">

  <!-- ===== HEADER (top only) ===== -->
  <header class="topbar" aria-label="Header">
    <!-- Brand -->
    <div class="brand" aria-label="Brand">
      <img class="brand-logo" src="/static/icon.png" alt="Greg" />
      <div class="brand-text">
        <div class="brand-title">Greg le Consanguin</div>
        <div class="brand-subtitle">Web Player</div>
      </div>
    </div>

    <!-- Search (center) -->
    <div class="top-search" aria-label="Search">
      <form id="searchForm" class="search-form" autocomplete="off">
        <div class="search-field">
          <span class="search-icon" aria-hidden="true">üîé</span>
          <input
            id="searchInput"
            class="search-input"
            type="text"
            placeholder="Colle un lien YouTube / Spotify ou tape une recherche‚Ä¶"
            autocomplete="off"
          />
        </div>
        <button class="btn btn--primary" type="submit" title="Lire">
          ‚ñ∂Ô∏è
        </button>
      </form>

      <!-- Autocomplete dropdown -->
      <div id="searchSuggestions" class="suggestions-container" aria-live="polite"></div>
    </div>

    <!-- Discord (right) -->
    <div class="top-auth" aria-label="Discord">
      <div class="auth-card">
        <div class="auth-state">
          <div class="avatar" id="userAvatar" aria-hidden="true">?</div>
          <div class="auth-text">
            <div class="auth-name" id="userName">Non connect√©</div>
            <div class="auth-sub" id="userStatus">Discord</div>
          </div>
        </div>

        <div class="auth-actions">
          <button class="btn btn--primary btn--sm" id="btn-login-discord" type="button">
            Login
          </button>
          <button class="btn btn--danger btn--sm hidden" id="btn-logout-discord" type="button">
            Logout
          </button>
        </div>

        <div class="auth-guild">
          <label for="guildSelect" class="label">Serveur</label>
          <select id="guildSelect" class="select">
            <option value="">(par d√©faut)</option>
          </select>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== MAIN CONTENT (3 columns) ===== -->
  <main class="content" aria-label="Main">
    <!-- Left: Queue -->
    <section class="panel panel--queue" aria-label="Queue">
      <div class="panel-head">
        <div class="panel-title">Queue</div>
        <div class="panel-meta" id="queueCount">0 titres</div>
      </div>
      <div class="panel-body">
        <div id="queueList" class="queue-list"></div>
      </div>
    </section>

    <!-- Center: Player -->
    <section class="panel panel--player" aria-label="Player">
      <div class="panel-head">
        <div class="panel-title">Now Playing</div>
        <div class="panel-meta">
          <button class="chip" id="btn-repeat" type="button" title="R√©p√©ter">üîÅ</button>
        </div>
      </div>

      <div class="panel-body">
        <div class="track-info">
          <div id="artwork" class="track-artwork" aria-label="Pochette">üéµ</div>
          <div id="trackTitle" class="track-title">Rien en cours</div>
          <div id="trackArtist" class="track-artist">Waiting‚Ä¶</div>
        </div>

        <div class="progress-container">
          <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div id="progressFill" class="progress-fill"></div>
          </div>
          <div class="progress-time">
            <span id="progressCurrent">0:00</span>
            <span id="progressTotal">0:00</span>
          </div>
        </div>

        <div class="controls-main">
          <button id="btn-stop" class="control-btn" type="button" title="Stop">‚èπ</button>
          <button id="btn-prev" class="control-btn" type="button" title="Restart" disabled>‚èÆ</button>
          <button id="btn-play-pause" class="control-btn primary" type="button" title="Play / Pause">‚ñ∂Ô∏è</button>
          <button id="btn-skip" class="control-btn" type="button" title="Next">‚è≠</button>
          <button id="btn-repeat-ghost" class="control-btn" type="button" title="Repeat (alt)" disabled>üîÅ</button>
        </div>
      </div>
    </section>

    <!-- Right: Spotify -->
    <section class="panel panel--spotify" aria-label="Spotify">
      <div class="panel-head">
        <div class="panel-title">Spotify</div>
        <div class="panel-meta">
          <span id="spotifyStatus" class="chip chip--warn">not linked</span>
        </div>
      </div>

      <div class="panel-body">
        <div class="sp-actions">
          <button class="btn btn--primary btn--block" id="btn-spotify-login" type="button">Link Spotify</button>
          <button class="btn btn--danger btn--block hidden" id="btn-spotify-logout" type="button">Unlink</button>
        </div>

        <div class="sp-section">
          <div class="sp-section-title">Playlists</div>
          <div class="sp-hint">
            (UI pr√™te ‚Äî on branchera l‚ÄôAPI playlists apr√®s)
          </div>

          <!-- Placeholder grid (ready for future JS) -->
          <div id="spGrid" class="sp-grid">
            <div class="sp-empty">Aucune playlist charg√©e.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== STATUS BAR (bottom only) ===== -->
  <footer class="status-bar" aria-label="Status">
    <div id="statusMessage" class="status-message">
      <span id="statusText">En attente de Greg‚Ä¶</span>
    </div>
  </footer>

</div>

<script>
  window.GREG_API_BASE = "/api/v1";
</script>
<script src="/static/player.js" defer></script>
</body>
</html>
