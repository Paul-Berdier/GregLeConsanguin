<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Greg le Consanguin â€” Web Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f172a" />

  <link rel="icon" type="image/png" href="/static/icon.png" />
  <link rel="stylesheet" href="/static/player.css" />
</head>

<body>
<!-- SVG sprite -->
<svg width="0" height="0" style="position:absolute;visibility:hidden">
  <symbol id="icon-x" viewBox="0 0 24 24"><path fill="currentColor" d="M18.3 5.7a1 1 0 0 0-1.4-1.4L12 9.17 7.1 4.3A1 1 0 0 0 5.7 5.7L10.59 10.6 5.7 15.5a1 1 0 1 0 1.4 1.4L12 12 16.9 16.9a1 1 0 0 0 1.4-1.4L13.41 10.6 18.3 5.7Z"/></symbol>
  <symbol id="icon-gear" viewBox="0 0 24 24"><path fill="currentColor" d="M12 8a4 4 0 1 1 0 8a4 4 0 0 1 0-8m8.94 3.06l-1.53-.26a6.96 6.96 0 0 0-.78-1.89l.93-1.23a.75.75 0 0 0-.06-.96l-1.41-1.41a.75.75 0 0 0-.96-.06l-1.23.93a6.96 6.96 0 0 0-1.89-.78l-.26-1.53A.75.75 0 0 0 12 2h-2a.75.75 0 0 0-.74.63l-.26 1.53c-.67.17-1.3.43-1.89.78l-1.23-.93a.75.75 0 0 0-.96.06L3.51 5.48a.75.75 0 0 0-.06.96l.93 1.23c-.35.59-.61 1.22-.78 1.89l-1.53.26A.75.75 0 0 0 2 12v2c0 .36.26.68.62.74l1.53.26c.17.67.43 1.3.78 1.89l-.93 1.23a.75.75 0 0 0 .06.96l1.41 1.41c.29.29.74.32 1.05.06l1.23-.93c.59.35 1.22.61 1.89.78l.26 1.53c.06.36.38.62.74.62h2c.36 0 .68-.26.74-.62l.26-1.53c.67-.17 1.3-.43 1.89-.78l1.23.93c.31.26.76.23 1.05-.06l1.41-1.41c.29-.29.32-.74.06-1.05l-.93-1.23c.35-.59.61-1.22.78-1.89l1.53-.26c.36-.06.62-.38.62-.74Z"/></symbol>
  <symbol id="icon-triangle" viewBox="0 0 24 24"><path fill="currentColor" d="M7 10l5 5 5-5H7z"/></symbol>
  <symbol id="icon-plus" viewBox="0 0 24 24"><path fill="currentColor" d="M11 5h2v14h-2zM5 11h14v2H5z"/></symbol>
  <symbol id="icon-play" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"/></symbol>
  <symbol id="icon-pause" viewBox="0 0 24 24"><path fill="currentColor" d="M6 5h4v14H6zM14 5h4v14h-4z"/></symbol>
  <symbol id="icon-prev" viewBox="0 0 24 24"><path fill="currentColor" d="M6 6h2v12H6zM9 12l9 6V6z"/></symbol>
  <symbol id="icon-next" viewBox="0 0 24 24"><path fill="currentColor" d="M16 6h2v12h-2zM6 18l9-6-9-6z"/></symbol>
  <symbol id="icon-repeat" viewBox="0 0 24 24"><path fill="currentColor" d="M17 1l4 4-4 4V7H7a3 3 0 0 0-3 3v2H2v-2a5 5 0 0 1 5-5h10V1zm-10 22l-4-4 4-4v2h10a3 3 0 0 0 3-3v-2h2v2a5 5 0 0 1-5 5H7v4z"/></symbol>
  <symbol id="icon-stop" viewBox="0 0 24 24"><path fill="currentColor" d="M6 6h12v12H6z"/></symbol>
  <symbol id="icon-trash" viewBox="0 0 24 24"><path fill="currentColor" d="M9 3h6l1 2h4v2H4V5h4l1-2Zm1 7v8h2v-8h-2Zm4 0v8h2v-8h-2ZM7 10v8h2v-8H7Z"/></symbol>
  <symbol id="icon-drag" viewBox="0 0 24 24"><path fill="currentColor" d="M9 3h2v2H9V3Zm4 0h2v2h-2V3ZM9 7h2v2H9V7Zm4 0h2v2h-2V7ZM9 11h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 15h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 19h2v2H9v-2Zm4 0h2v2h-2v-2Z"/></symbol>
  <symbol id="icon-spotify" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm4.6 14.3a.9.9 0 0 1-1.2.3c-3.2-2-7.2-2-10.1-.8a.9.9 0 1 1-.7-1.6c3.3-1.4 7.9-1.3 11.6.9.4.3.6.8.4 1.2zm1.1-3.1a1 1 0 0 1-1.3.4c-3.7-2.2-9.3-2.8-13.2-1.1a1 1 0 0 1-.8-1.9c4.5-2 10.7-1.4 14.9 1.2.5.3.7.9.4 1.4zm.2-3.4a1.1 1.1 0 0 1-1.5.4c-4.1-2.4-10.8-2.6-14.8-1a1.1 1.1 0 1 1-.8-2c4.6-1.8 12.1-1.6 16.9 1.2.5.3.7 1 .4 1.4z"/></symbol>
</svg>

<div class="app">

  <!-- ===== HEADER (top only) ===== -->
  <header class="topbar" aria-label="Header">
    <!-- Brand -->
    <div class="brand" aria-label="Brand">
      <img class="brand-logo" src="/static/icon.png" alt="Greg" />
      <div class="brand-text">
        <div class="brand-title">Greg le Consanguin</div>
        <div class="brand-subtitle">Web Player</div>
      </div>
    </div>

    <!-- Search (center) -->
    <div class="top-search" aria-label="Search">
      <form id="searchForm" class="search-form" autocomplete="off">
        <div class="search-field">
          <input
            id="searchInput"
            class="search-input"
            type="text"
            placeholder="Colle un lien YouTube / Spotify ou tape une rechercheâ€¦"
            autocomplete="off"
          />
        </div>
        <button class="btn btn--primary" type="submit" title="Lire">
            <svg class="icon"><use href="#icon-play"/></svg>
        </button>
      </form>

      <!-- Autocomplete dropdown -->
      <div id="searchSuggestions" class="suggestions-container" aria-live="polite"></div>
    </div>

    <!-- Discord (right) -->
    <div class="top-auth" aria-label="Discord">
        <div class="auth-state">
          <div class="avatar" id="userAvatar" aria-hidden="true">?</div>
          <div class="auth-text">
            <div class="auth-name" id="userName">Non connectÃ©</div>
            <div class="auth-sub" id="userStatus">Discord</div>
          </div>
        </div>

        <div class="auth-actions">
          <button class="btn btn--primary btn--sm" id="btn-login-discord" type="button">
            Login
          </button>
          <button class="btn btn--danger btn--sm hidden" id="btn-logout-discord" type="button">
            Logout
          </button>
        </div>

        <div class="auth-guild">
          <label for="guildSelect" class="label">Serveur</label>
          <select id="guildSelect" class="select">
            <option value="">(par dÃ©faut)</option>
          </select>
        </div>
    </div>
  </header>

  <!-- ===== MAIN CONTENT (3 columns) ===== -->
  <main class="content" aria-label="Main">
    <!-- Left: Queue -->
    <section class="panel panel--queue" aria-label="Queue">
      <div class="panel-head">
        <div class="panel-title">Queue</div>
        <div class="panel-meta" id="queueCount">0 titres</div>
      </div>
      <div class="panel-body">
        <div id="queueList" class="queue-list"></div>
      </div>
    </section>

    <!-- Center: Player -->
    <section class="panel panel--player" aria-label="Player">
      <div class="panel-head">
        <div class="panel-title">Now Playing</div>
      </div>

      <div class="panel-body">
        <div class="track-info">
          <div id="artwork" class="track-artwork" aria-label="Pochette">ðŸŽµ</div>
          <div id="trackTitle" class="track-title">Rien en cours</div>
          <div id="trackArtist" class="track-artist">Waitingâ€¦</div>
        </div>

        <div class="progress-container">
          <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div id="progressFill" class="progress-fill"></div>
          </div>
          <div class="progress-time">
            <span id="progressCurrent">0:00</span>
            <span id="progressTotal">0:00</span>
          </div>
        </div>

        <div class="controls-main">
          <button id="btn-stop" class="control-btn" type="button" title="Stop">
              <svg class="icon"><use href="#icon-stop"/></svg>
          </button>
          <button id="btn-prev" class="control-btn" type="button" title="Restart" disabled>
              <svg class="icon"><use href="#icon-prev"/></svg>
          </button>
          <button id="btn-play-pause" class="control-btn primary" type="button" title="Play / Pause">
              <svg class="icon"><use href="#icon-play"/></svg>
          </button>
          <button id="btn-skip" class="control-btn" type="button" title="Next">
              <svg class="icon"><use href="#icon-next"/></svg>
          </button>
          <button id="btn-repeat-ghost" class="control-btn" type="button" title="Repeat (alt)" disabled>
              <svg class="icon"><use href="#icon-repeat"/></svg>
          </button>
        </div>
      </div>
    </section>

    <!-- Right: Spotify -->
    <section class="panel panel--spotify" aria-label="Spotify">
      <div class="panel-head">
        <div class="panel-title">Spotify</div>
        <div class="panel-meta">
          <span id="spotifyStatus" class="chip chip--warn">not linked</span>
        </div>
      </div>

      <div class="panel-body">
        <div class="sp-actions">
          <button class="btn btn--primary btn--block" id="btn-spotify-login" type="button">Link Spotify</button>
          <button class="btn btn--danger btn--block hidden" id="btn-spotify-logout" type="button">Unlink</button>
        </div>

        <div class="sp-section">
          <div class="sp-section-title">Playlists</div>
          <div class="sp-hint">
            (UI prÃªte â€” on branchera lâ€™API playlists aprÃ¨s)
          </div>

          <!-- Placeholder grid (ready for future JS) -->
          <div id="spGrid" class="sp-grid">
            <div class="sp-empty">Aucune playlist chargÃ©e.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== STATUS BAR (bottom only) ===== -->
  <footer class="status-bar" aria-label="Status">
    <div id="statusMessage" class="status-message">
      <span id="statusText">En attente de Gregâ€¦</span>
    </div>
  </footer>

</div>

<script>
  window.GREG_API_BASE = "/api/v1";
</script>
<script src="/static/player.js" defer></script>
</body>
</html>
